<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Moodle GuestView</title>
</head>
<body>
<iframe src="http://sso.thsh.tp.edu.tw/" name="sso_login_target" height="100" width="400" frameborder="0" scrolling="no" style="overflow: scroll;"></iframe>
<form name="sso_login_form" action="http://sso.thsh.tp.edu.tw/node?destination=node/1" method="post" target="sso_login_target">
<h3>自動登入訪客帳號中，請稍後...</h3>
<input type="hidden" name="name" value="moodle_guest" />
<input type="hidden" name="pass" value="moodle_guest" />
<input type="hidden" name="form_id" value="user_login_block" />
</form>
<script type="text/javascript">
  function isInteger(value) {
    return (!isNaN(value) && Math.floor(value) === value);
  }
  function jumpToCourse(cid){
    console.log(cid);
    document.location.href = 'http://moodle.thsh.tp.edu.tw/course/view.php?id=' + cid;
  }
  document.sso_login_form.submit();
  var u = document.location.href;
  u = u.split("/");
  console.log(u[4]);
  if(isInteger(Math.floor(u[4]))){
    setTimeout("jumpToCourse(" + Math.floor(u[4]) + ")", 500);
  }
</script>
</body>
</html>
